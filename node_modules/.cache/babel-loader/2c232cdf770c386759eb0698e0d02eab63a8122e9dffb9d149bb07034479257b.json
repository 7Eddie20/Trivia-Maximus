{"ast":null,"code":"import _createForOfIteratorHelper from \"R:/Projects/Trivia-Maximus/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { __rest } from 'tslib';\nimport { resize } from '../resize/index.es.js';\nimport { createScrollInfo } from './info.es.js';\nimport { createOnScrollHandler } from './on-scroll-handler.es.js';\nvar scrollListeners = new WeakMap();\nvar resizeListeners = new WeakMap();\nvar onScrollHandlers = new WeakMap();\nvar getEventTarget = function getEventTarget(element) {\n  return element === document.documentElement ? window : element;\n};\nfunction scroll(onScroll) {\n  var _a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _a$container = _a.container,\n    container = _a$container === void 0 ? document.documentElement : _a$container,\n    options = __rest(_a, [\"container\"]);\n  var containerHandlers = onScrollHandlers.get(container);\n  /**\r\n   * Get the onScroll handlers for this container.\r\n   * If one isn't found, create a new one.\r\n   */\n  if (!containerHandlers) {\n    containerHandlers = new Set();\n    onScrollHandlers.set(container, containerHandlers);\n  }\n  /**\r\n   * Create a new onScroll handler for the provided callback.\r\n   */\n  var info = createScrollInfo();\n  var containerHandler = createOnScrollHandler(container, onScroll, info, options);\n  containerHandlers.add(containerHandler);\n  /**\r\n   * Check if there's a scroll event listener for this container.\r\n   * If not, create one.\r\n   */\n  if (!scrollListeners.has(container)) {\n    var _listener = function _listener() {\n      var time = performance.now();\n      var _iterator = _createForOfIteratorHelper(containerHandlers),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var handler = _step.value;\n          handler.measure();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var _iterator2 = _createForOfIteratorHelper(containerHandlers),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _handler = _step2.value;\n          _handler.update(time);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(containerHandlers),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _handler2 = _step3.value;\n          _handler2.notify();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    };\n    scrollListeners.set(container, _listener);\n    var target = getEventTarget(container);\n    window.addEventListener(\"resize\", _listener, {\n      passive: true\n    });\n    if (container !== document.documentElement) {\n      resizeListeners.set(container, resize(container, _listener));\n    }\n    target.addEventListener(\"scroll\", _listener, {\n      passive: true\n    });\n  }\n  var listener = scrollListeners.get(container);\n  var onLoadProcesss = requestAnimationFrame(listener);\n  return function () {\n    var _a;\n    if (typeof onScroll !== \"function\") onScroll.stop();\n    cancelAnimationFrame(onLoadProcesss);\n    /**\r\n     * Check if we even have any handlers for this container.\r\n     */\n    var containerHandlers = onScrollHandlers.get(container);\n    if (!containerHandlers) return;\n    containerHandlers.delete(containerHandler);\n    if (containerHandlers.size) return;\n    /**\r\n     * If no more handlers, remove the scroll listener too.\r\n     */\n    var listener = scrollListeners.get(container);\n    scrollListeners.delete(container);\n    if (listener) {\n      getEventTarget(container).removeEventListener(\"scroll\", listener);\n      (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n      window.removeEventListener(\"resize\", listener);\n    }\n  };\n}\nexport { scroll };","map":{"version":3,"names":["__rest","resize","createScrollInfo","createOnScrollHandler","scrollListeners","WeakMap","resizeListeners","onScrollHandlers","getEventTarget","element","document","documentElement","window","scroll","onScroll","_a","container","options","containerHandlers","get","Set","set","info","containerHandler","add","has","listener","time","performance","now","handler","measure","update","notify","target","addEventListener","passive","onLoadProcesss","requestAnimationFrame","stop","cancelAnimationFrame","delete","size","removeEventListener"],"sources":["R:/Projects/Trivia-Maximus/node_modules/@motionone/dom/dist/gestures/scroll/index.es.js"],"sourcesContent":["import { __rest } from 'tslib';\r\nimport { resize } from '../resize/index.es.js';\r\nimport { createScrollInfo } from './info.es.js';\r\nimport { createOnScrollHandler } from './on-scroll-handler.es.js';\r\n\r\nconst scrollListeners = new WeakMap();\r\nconst resizeListeners = new WeakMap();\r\nconst onScrollHandlers = new WeakMap();\r\nconst getEventTarget = (element) => element === document.documentElement ? window : element;\r\nfunction scroll(onScroll, _a = {}) {\r\n    var { container = document.documentElement } = _a, options = __rest(_a, [\"container\"]);\r\n    let containerHandlers = onScrollHandlers.get(container);\r\n    /**\r\n     * Get the onScroll handlers for this container.\r\n     * If one isn't found, create a new one.\r\n     */\r\n    if (!containerHandlers) {\r\n        containerHandlers = new Set();\r\n        onScrollHandlers.set(container, containerHandlers);\r\n    }\r\n    /**\r\n     * Create a new onScroll handler for the provided callback.\r\n     */\r\n    const info = createScrollInfo();\r\n    const containerHandler = createOnScrollHandler(container, onScroll, info, options);\r\n    containerHandlers.add(containerHandler);\r\n    /**\r\n     * Check if there's a scroll event listener for this container.\r\n     * If not, create one.\r\n     */\r\n    if (!scrollListeners.has(container)) {\r\n        const listener = () => {\r\n            const time = performance.now();\r\n            for (const handler of containerHandlers)\r\n                handler.measure();\r\n            for (const handler of containerHandlers)\r\n                handler.update(time);\r\n            for (const handler of containerHandlers)\r\n                handler.notify();\r\n        };\r\n        scrollListeners.set(container, listener);\r\n        const target = getEventTarget(container);\r\n        window.addEventListener(\"resize\", listener, { passive: true });\r\n        if (container !== document.documentElement) {\r\n            resizeListeners.set(container, resize(container, listener));\r\n        }\r\n        target.addEventListener(\"scroll\", listener, { passive: true });\r\n    }\r\n    const listener = scrollListeners.get(container);\r\n    const onLoadProcesss = requestAnimationFrame(listener);\r\n    return () => {\r\n        var _a;\r\n        if (typeof onScroll !== \"function\")\r\n            onScroll.stop();\r\n        cancelAnimationFrame(onLoadProcesss);\r\n        /**\r\n         * Check if we even have any handlers for this container.\r\n         */\r\n        const containerHandlers = onScrollHandlers.get(container);\r\n        if (!containerHandlers)\r\n            return;\r\n        containerHandlers.delete(containerHandler);\r\n        if (containerHandlers.size)\r\n            return;\r\n        /**\r\n         * If no more handlers, remove the scroll listener too.\r\n         */\r\n        const listener = scrollListeners.get(container);\r\n        scrollListeners.delete(container);\r\n        if (listener) {\r\n            getEventTarget(container).removeEventListener(\"scroll\", listener);\r\n            (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\r\n            window.removeEventListener(\"resize\", listener);\r\n        }\r\n    };\r\n}\r\n\r\nexport { scroll };\r\n"],"mappings":";AAAA,SAASA,MAAM,QAAQ,OAAO;AAC9B,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,gBAAgB,QAAQ,cAAc;AAC/C,SAASC,qBAAqB,QAAQ,2BAA2B;AAEjE,IAAMC,eAAe,GAAG,IAAIC,OAAO,EAAE;AACrC,IAAMC,eAAe,GAAG,IAAID,OAAO,EAAE;AACrC,IAAME,gBAAgB,GAAG,IAAIF,OAAO,EAAE;AACtC,IAAMG,cAAc,GAAG,SAAjBA,cAAc,CAAIC,OAAO;EAAA,OAAKA,OAAO,KAAKC,QAAQ,CAACC,eAAe,GAAGC,MAAM,GAAGH,OAAO;AAAA;AAC3F,SAASI,MAAM,CAACC,QAAQ,EAAW;EAAA,IAATC,EAAE,uEAAG,CAAC,CAAC;EAC7B,mBAA+CA,EAAE,CAA3CC,SAAS;IAATA,SAAS,6BAAGN,QAAQ,CAACC,eAAe;IAASM,OAAO,GAAGjB,MAAM,CAACe,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;EACtF,IAAIG,iBAAiB,GAAGX,gBAAgB,CAACY,GAAG,CAACH,SAAS,CAAC;EACvD;AACJ;AACA;AACA;EACI,IAAI,CAACE,iBAAiB,EAAE;IACpBA,iBAAiB,GAAG,IAAIE,GAAG,EAAE;IAC7Bb,gBAAgB,CAACc,GAAG,CAACL,SAAS,EAAEE,iBAAiB,CAAC;EACtD;EACA;AACJ;AACA;EACI,IAAMI,IAAI,GAAGpB,gBAAgB,EAAE;EAC/B,IAAMqB,gBAAgB,GAAGpB,qBAAqB,CAACa,SAAS,EAAEF,QAAQ,EAAEQ,IAAI,EAAEL,OAAO,CAAC;EAClFC,iBAAiB,CAACM,GAAG,CAACD,gBAAgB,CAAC;EACvC;AACJ;AACA;AACA;EACI,IAAI,CAACnB,eAAe,CAACqB,GAAG,CAACT,SAAS,CAAC,EAAE;IACjC,IAAMU,SAAQ,GAAG,SAAXA,SAAQ,GAAS;MACnB,IAAMC,IAAI,GAAGC,WAAW,CAACC,GAAG,EAAE;MAAC,2CACTX,iBAAiB;QAAA;MAAA;QAAvC,oDACI;UAAA,IADOY,OAAO;UACdA,OAAO,CAACC,OAAO,EAAE;QAAA;MAAC;QAAA;MAAA;QAAA;MAAA;MAAA,4CACAb,iBAAiB;QAAA;MAAA;QAAvC,uDACI;UAAA,IADOY,QAAO;UACdA,QAAO,CAACE,MAAM,CAACL,IAAI,CAAC;QAAA;MAAC;QAAA;MAAA;QAAA;MAAA;MAAA,4CACHT,iBAAiB;QAAA;MAAA;QAAvC,uDACI;UAAA,IADOY,SAAO;UACdA,SAAO,CAACG,MAAM,EAAE;QAAA;MAAC;QAAA;MAAA;QAAA;MAAA;IACzB,CAAC;IACD7B,eAAe,CAACiB,GAAG,CAACL,SAAS,EAAEU,SAAQ,CAAC;IACxC,IAAMQ,MAAM,GAAG1B,cAAc,CAACQ,SAAS,CAAC;IACxCJ,MAAM,CAACuB,gBAAgB,CAAC,QAAQ,EAAET,SAAQ,EAAE;MAAEU,OAAO,EAAE;IAAK,CAAC,CAAC;IAC9D,IAAIpB,SAAS,KAAKN,QAAQ,CAACC,eAAe,EAAE;MACxCL,eAAe,CAACe,GAAG,CAACL,SAAS,EAAEf,MAAM,CAACe,SAAS,EAAEU,SAAQ,CAAC,CAAC;IAC/D;IACAQ,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAET,SAAQ,EAAE;MAAEU,OAAO,EAAE;IAAK,CAAC,CAAC;EAClE;EACA,IAAMV,QAAQ,GAAGtB,eAAe,CAACe,GAAG,CAACH,SAAS,CAAC;EAC/C,IAAMqB,cAAc,GAAGC,qBAAqB,CAACZ,QAAQ,CAAC;EACtD,OAAO,YAAM;IACT,IAAIX,EAAE;IACN,IAAI,OAAOD,QAAQ,KAAK,UAAU,EAC9BA,QAAQ,CAACyB,IAAI,EAAE;IACnBC,oBAAoB,CAACH,cAAc,CAAC;IACpC;AACR;AACA;IACQ,IAAMnB,iBAAiB,GAAGX,gBAAgB,CAACY,GAAG,CAACH,SAAS,CAAC;IACzD,IAAI,CAACE,iBAAiB,EAClB;IACJA,iBAAiB,CAACuB,MAAM,CAAClB,gBAAgB,CAAC;IAC1C,IAAIL,iBAAiB,CAACwB,IAAI,EACtB;IACJ;AACR;AACA;IACQ,IAAMhB,QAAQ,GAAGtB,eAAe,CAACe,GAAG,CAACH,SAAS,CAAC;IAC/CZ,eAAe,CAACqC,MAAM,CAACzB,SAAS,CAAC;IACjC,IAAIU,QAAQ,EAAE;MACVlB,cAAc,CAACQ,SAAS,CAAC,CAAC2B,mBAAmB,CAAC,QAAQ,EAAEjB,QAAQ,CAAC;MACjE,CAACX,EAAE,GAAGT,eAAe,CAACa,GAAG,CAACH,SAAS,CAAC,MAAM,IAAI,IAAID,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,EAAE;MAC/EH,MAAM,CAAC+B,mBAAmB,CAAC,QAAQ,EAAEjB,QAAQ,CAAC;IAClD;EACJ,CAAC;AACL;AAEA,SAASb,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}